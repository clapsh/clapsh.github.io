name: deploy # workflowì˜ ì´ë¦„ : deploy

on: # workflowë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì´ë²¤íŠ¸ 
  push: # master ë˜ëŠ” main branchì—ì„œ pushê°€ ë°œìƒí•  ë•Œ
    branches:
      - master
      - main
  pull_request: #  master ë˜ëŠ” main branchì—ì„œ pull_requestê°€ ë°œìƒí•  ë•Œ
    branches:
      - master
      - main
  workflow_dispatch: # workflowë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì´ë²¤íŠ¸ (ì—¬ê¸°ì—ì„œëŠ” ì •ì˜ë˜ì§€ ì•ŠìŒ)

permissions:        # GITHUB-TOKENì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ permissionì„ ë³€ê²½ 
  contents: write   # read/write(ê¸°ë³¸ permission) -> writeë¡œ ë³€ê²½

jobs:                        # workflowì˜ ì£¼ìš” component ì •ì˜ 
  deploy:                    # ë°°í¬ë¥¼ ë§Œë“¤ ë•Œ ì‹¤í–‰í•  workflow
    runs-on: ubuntu-latest   # ubuntu-latestì—ì„œ ì‹¤í–‰ 
    steps:                   # ì¼ë ¨ì˜ task
    - name: Checkout ğŸ›ï¸        # task ì´ë¦„ :  Checkout ğŸ›ï¸
      uses: actions/checkout@v3 # actions/checkout@v3ì—ì„œ ì •ì˜ëœ action ì‹¤í–‰ 
    - name: Setup Ruby          # task ì´ë¦„:  Setup Ruby 
      uses: ruby/setup-ruby@v1 # ruby/setup-ruby@v1ì—ì„œ ì •ì˜ëœ action ì‹¤í–‰
      with:                     # í˜¸ì¶œëœ workflowì— inputìœ¼ë¡œ ì „ë‹¬í•  ê²ƒ
        ruby-version: '3.2.1'   # ruby-version ì„¤ì •
        bundler-cache: true     # bundle-installì„ ì‹¤í–‰í•˜ê³  ì„¤ì¹˜ëœ gemì„ cacheì— ì €ì¥
    - name: Install and Build ğŸ”§  # task ì´ë¦„: Install and Build
      run: |                        # command line ì‹¤í–‰ 
        npm install -g mermaid.cli # mermaid CLI ì„¤ì¹˜
        bundle exec jekyll build   # rubyí™˜ê²½ì„ Gemfileì•ˆì˜ gemsì—ì„œë§Œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì»¤ë§¨ë“œ
    - name: Deploy ğŸš€                               # taskì´ë¦„ :  Deploy ğŸš€
      if: github.event_name != 'pull_request'       # ì¡°ê±´ë¬¸ : github.event_nameì´ 'pull_request'ê°€ ì•„ë‹Œ ê²½ìš°
      uses: JamesIves/github-pages-deploy-action@v4 # JamesIves/github-pages-deploy-action@v4 ì—ì„œ ì •ì˜ëœ action ì‹¤í–‰ 
      with:                                         
        folder: _site                               # actionì´ deployë˜ëŠ” í´ë”ëª… 

